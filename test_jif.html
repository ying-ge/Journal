<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JIF å®Œæ•´æ•°æ®æµ‹è¯•</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            max-width: 900px;
            margin: 0 auto;
            background: #f8f9fa;
        }
        h1 {
            color: #2c3e50;
            text-align: center;
        }
        .test-result {
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
            background: white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .journal-card {
            margin-top: 20px;
            padding: 15px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .journal-name {
            font-size: 1.2rem;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 10px;
        }
        .jif-metrics {
            margin-top: 8px;
            padding: 8px 12px;
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            border-radius: 6px;
            box-shadow: 0 2px 4px rgba(17, 153, 142, 0.2);
        }
        .jif-main {
            color: white;
            font-size: 0.95rem;
            margin-bottom: 6px;
        }
        .jif-main strong {
            font-size: 1.1rem;
        }
        .jif-details, .jif-extra {
            display: flex;
            gap: 15px;
            color: rgba(255, 255, 255, 0.9);
            font-size: 0.8rem;
            margin-bottom: 4px;
        }
        .jif-publisher {
            color: rgba(255, 255, 255, 0.85);
            font-size: 0.8rem;
        }
        .success {
            background: #d4edda;
            color: #155724;
        }
        .error {
            background: #f8d7da;
            color: #721c24;
        }
    </style>
</head>
<body>
    <h1>ğŸ‰ JIF å®Œæ•´æ•°æ®æµ‹è¯•</h1>
    <div id="results"></div>

    <script src="jif_metrics.js"></script>
    <script>
        const resultsDiv = document.getElementById('results');

        function addResult(message, isSuccess) {
            const div = document.createElement('div');
            div.className = 'test-result ' + (isSuccess ? 'success' : 'error');
            div.innerHTML = message;
            resultsDiv.appendChild(div);
        }

        function displayJournalCard(journalName, data) {
            const card = document.createElement('div');
            card.className = 'journal-card';

            let jifDetails = '';
            if (data.jif_quartile) jifDetails += `<span>Q: ${data.jif_quartile}</span>`;
            if (data.jif_rank) jifDetails += `<span>Rank: ${data.jif_rank}</span>`;
            if (data.jci) jifDetails += `<span>JCI: ${data.jci}</span>`;

            let jifExtra = '';
            if (data.jif_without_self_cites) {
                jifExtra += `<span>æ— è‡ªå¼•JIF: ${data.jif_without_self_cites}</span>`;
            }
            if (data.total_cites) {
                jifExtra += `<span>æ€»å¼•ç”¨: ${Number(data.total_cites).toLocaleString()}</span>`;
            }

            let publisherInfo = '';
            if (data.publisher) {
                publisherInfo = `<span>ğŸ¢ ${data.publisher}</span>`;
                if (data.abbreviated_journal) {
                    publisherInfo += `<span>â€¢ ${data.abbreviated_journal}</span>`;
                }
                if (data.issn) {
                    publisherInfo += `<span>â€¢ ISSN: ${data.issn}</span>`;
                }
            }

            card.innerHTML = `
                <div class="journal-name">${journalName}</div>
                ${data.jif_2024 ? `<div class="jif-metrics">
                    <div class="jif-main">ğŸ“ˆ JIF (2024): <strong>${data.jif_2024}</strong></div>
                    ${jifDetails ? `<div class="jif-details">${jifDetails}</div>` : ''}
                    ${data.five_year_jif ? `<div class="jif-details">
                        <span>5-Year JIF: ${data.five_year_jif}</span>
                    </div>` : ''}
                    ${jifExtra ? `<div class="jif-extra">${jifExtra}</div>` : ''}
                    ${publisherInfo ? `<div class="jif-publisher">${publisherInfo}</div>` : ''}
                </div>` : ''}
            `;
            resultsDiv.appendChild(card);
        }

        // æµ‹è¯•æ•°æ®åŠ è½½
        if (typeof jifData !== 'undefined') {
            addResult(`âœ… JIF å®Œæ•´æ•°æ®åŠ è½½æˆåŠŸï¼åŒ…å« <strong>${Object.keys(jifData).length.toLocaleString()}</strong> ç§æœŸåˆŠ`, true);

            // æµ‹è¯•å‡ ä¸ªé¡¶çº§æœŸåˆŠ
            const testJournals = ['NATURE', 'SCIENCE', 'CELL'];

            testJournals.forEach(journal => {
                const data = jifData[journal];
                if (data) {
                    displayJournalCard(journal, data);
                }
            });

            // ç»Ÿè®¡æ•°æ®å®Œæ•´æ€§
            let stats = {
                jif_2024: 0,
                five_year_jif: 0,
                jif_without_self_cites: 0,
                jci: 0,
                jif_quartile: 0,
                jif_rank: 0,
                total_cites: 0,
                publisher: 0
            };

            Object.values(jifData).forEach(data => {
                Object.keys(stats).forEach(key => {
                    if (data[key]) stats[key]++;
                });
            });

            const total = Object.keys(jifData).length;
            addResult(`ğŸ“Š æ•°æ®ç»Ÿè®¡:`, true);
            addResult(`
                <table style="width:100%;text-align:left;">
                    <tr><td>JIF 2024:</td><td>${stats.jif_2024.toLocaleString()} (${(stats.jif_2024/total*100).toFixed(1)}%)</td></tr>
                    <tr><td>5-Year JIF:</td><td>${stats.five_year_jif.toLocaleString()} (${(stats.five_year_jif/total*100).toFixed(1)}%)</td></tr>
                    <tr><td>æ— è‡ªå¼•JIF:</td><td>${stats.jif_without_self_cites.toLocaleString()} (${(stats.jif_without_self_cites/total*100).toFixed(1)}%)</td></tr>
                    <tr><td>JCI æŒ‡æ ‡:</td><td>${stats.jci.toLocaleString()} (${(stats.jci/total*100).toFixed(1)}%)</td></tr>
                    <tr><td>JIF Quartile:</td><td>${stats.jif_quartile.toLocaleString()} (${(stats.jif_quartile/total*100).toFixed(1)}%)</td></tr>
                    <tr><td>JIF Rank:</td><td>${stats.jif_rank.toLocaleString()} (${(stats.jif_rank/total*100).toFixed(1)}%)</td></tr>
                    <tr><td>Total Cites:</td><td>${stats.total_cites.toLocaleString()} (${(stats.total_cites/total*100).toFixed(1)}%)</td></tr>
                    <tr><td>Publisher:</td><td>${stats.publisher.toLocaleString()} (${(stats.publisher/total*100).toFixed(1)}%)</td></tr>
                </table>
            `, true);

        } else {
            addResult('âŒ JIF æ•°æ®åŠ è½½å¤±è´¥ï¼', false);
        }
    </script>
</body>
</html>
